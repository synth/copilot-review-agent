{
  "name": "copilot-review-agent",
  "displayName": "Copilot Review Agent â€” AI Branch Review",
  "description": "Diff your branch against a base, get AI-powered review findings as inline comments with a task list sidebar.",
  "version": "0.1.0",
  "publisher": "recognize",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/synth/copilot-review-agent"
  },
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": [
    "Other"
  ],
  "keywords": [
    "code review",
    "AI",
    "diff",
    "git",
    "copilot"
  ],
  "extensionDependencies": [
    "vscode.git"
  ],
  "main": "./out/extension.js",
  "activationEvents": [
    "onView:copilotReviewAgent.controlPanel",
    "onView:copilotReviewAgent.taskList"
  ],
  "contributes": {
    "commands": [
      {
        "command": "copilotReviewAgent.reviewBranch",
        "title": "Copilot Review Agent: Review Branch",
        "icon": "$(play)"
      },
      {
        "command": "copilotReviewAgent.reviewFile",
        "title": "Copilot Review Agent: Review Current File",
        "icon": "$(file-code)"
      },
      {
        "command": "copilotReviewAgent.clearReview",
        "title": "Copilot Review Agent: Clear All Findings",
        "icon": "$(clear-all)"
      },
      {
        "command": "copilotReviewAgent.exportMarkdown",
        "title": "Copilot Review Agent: Export Findings as Markdown",
        "icon": "$(markdown)"
      },
      {
        "command": "copilotReviewAgent.refreshReview",
        "title": "Copilot Review Agent: Re-run Review",
        "icon": "$(refresh)"
      },
      {
        "command": "copilotReviewAgent.selectBaseBranch",
        "title": "Copilot Review Agent: Change Base Branch"
      },
      {
        "command": "copilotReviewAgent.selectTargetBranch",
        "title": "Copilot Review Agent: Change Target Branch"
      },
      {
        "command": "copilotReviewAgent.initConfig",
        "title": "Copilot Review Agent: Initialize Config File"
      },
      {
        "command": "copilotReviewAgent.skipFinding",
        "title": "Skip",
        "icon": "$(pass)"
      },
      {
        "command": "copilotReviewAgent.fixInline",
        "title": "Fix Inline",
        "icon": "$(wand)"
      },
      {
        "command": "copilotReviewAgent.fixInChat",
        "title": "Fix in Chat",
        "icon": "$(comment-discussion)"
      },
      {
        "command": "copilotReviewAgent.fixInEdits",
        "title": "Fix in Edits",
        "icon": "$(edit)"
      },
      {
        "command": "copilotReviewAgent.goToFinding",
        "title": "Go to Finding",
        "icon": "$(go-to-file)"
      },
      {
        "command": "copilotReviewAgent.skipTreeItem",
        "title": "Skip",
        "icon": "$(pass)"
      },
      {
        "command": "copilotReviewAgent.fixTreeItem",
        "title": "Fix Inline",
        "icon": "$(wand)"
      },
      {
        "command": "copilotReviewAgent.fixAllInFile",
        "title": "Fix All in File",
        "icon": "$(wand)"
      },
      {
        "command": "copilotReviewAgent.sortFindings",
        "title": "Sort Findings",
        "icon": "$(sort-precedence)"
      },
      {
        "command": "copilotReviewAgent.backToHistory",
        "title": "Back to History",
        "icon": "$(arrow-left)"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "copilot-review-agent",
          "title": "Copilot Review Agent",
          "icon": "media/icon.svg"
        }
      ]
    },
    "views": {
      "copilot-review-agent": [
        {
          "type": "webview",
          "id": "copilotReviewAgent.controlPanel",
          "name": "Review Controls",
          "visibility": "visible"
        },
        {
          "id": "copilotReviewAgent.taskList",
          "name": "Review Findings",
          "when": "copilotReviewAgent.hasReview",
          "visibility": "visible"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "copilotReviewAgent.taskList",
        "contents": "No review findings yet."
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "copilotReviewAgent.backToHistory",
          "when": "view == copilotReviewAgent.taskList && copilotReviewAgent.inReviewDetail",
          "group": "navigation@0"
        },
        {
          "command": "copilotReviewAgent.sortFindings",
          "when": "view == copilotReviewAgent.taskList",
          "group": "navigation@0"
        },
        {
          "command": "copilotReviewAgent.refreshReview",
          "when": "view == copilotReviewAgent.taskList",
          "group": "navigation@1"
        },
        {
          "command": "copilotReviewAgent.clearReview",
          "when": "view == copilotReviewAgent.taskList",
          "group": "navigation@2"
        },
        {
          "command": "copilotReviewAgent.exportMarkdown",
          "when": "view == copilotReviewAgent.taskList",
          "group": "overflow"
        }
      ],
      "view/item/context": [
        {
          "command": "copilotReviewAgent.goToFinding",
          "when": "view == copilotReviewAgent.taskList && viewItem == finding",
          "group": "inline@1"
        },
        {
          "command": "copilotReviewAgent.skipTreeItem",
          "when": "view == copilotReviewAgent.taskList && viewItem == finding",
          "group": "inline@2"
        },
        {
          "command": "copilotReviewAgent.fixTreeItem",
          "when": "view == copilotReviewAgent.taskList && viewItem == finding",
          "group": "inline@3"
        },
        {
          "command": "copilotReviewAgent.fixAllInFile",
          "when": "view == copilotReviewAgent.taskList && viewItem == fileGroup",
          "group": "inline@1"
        }
      ],
      "comments/commentThread/title": [
        {
          "command": "copilotReviewAgent.skipFinding",
          "when": "commentController == copilot-review-agent",
          "group": "inline@1"
        },
        {
          "command": "copilotReviewAgent.fixInline",
          "when": "commentController == copilot-review-agent",
          "group": "inline@2"
        },
        {
          "command": "copilotReviewAgent.fixInChat",
          "when": "commentController == copilot-review-agent",
          "group": "inline@3"
        },
        {
          "command": "copilotReviewAgent.fixInEdits",
          "when": "commentController == copilot-review-agent",
          "group": "inline@4"
        }
      ]
    },
    "configuration": {
      "title": "Copilot Review Agent",
      "properties": {
        "copilotReviewAgent.baseBranch": {
          "type": "string",
          "default": "main",
          "description": "Default base branch to diff against."
        },
        "copilotReviewAgent.targetBranch": {
          "type": "string",
          "default": "",
          "description": "Default target branch. Empty means current HEAD + working tree."
        },
        "copilotReviewAgent.includeUncommitted": {
          "type": "boolean",
          "default": true,
          "description": "Include uncommitted changes when target matches current checkout."
        },
        "copilotReviewAgent.severityThreshold": {
          "type": "string",
          "default": "low",
            "enum": [
            "blocker",
            "high",
            "medium",
            "low",
            "nit"
            ],
          "description": "Minimum severity level to include in findings."
        },
        "copilotReviewAgent.excludePaths": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "vendor/**",
            "node_modules/**",
            "db/schema.rb"
          ],
          "description": "Glob patterns of files to exclude from review."
        },
        "copilotReviewAgent.maxFilesPerChunk": {
          "type": "number",
          "default": 5,
          "minimum": 1,
          "maximum": 50,
          "description": "Max files to include per AI review chunk."
        },
        "copilotReviewAgent.contextLines": {
          "type": "number",
          "default": 10,
          "minimum": 0,
          "maximum": 100,
          "description": "Number of surrounding lines of context to include around each changed hunk when building the review prompt. Lower values reduce token usage; higher values give the AI more surrounding context. Overlapping context windows for nearby hunks are automatically merged."
        }
      }
    },
    "keybindings": [
      {
        "command": "copilotReviewAgent.reviewBranch",
        "key": "ctrl+shift+alt+r",
        "mac": "cmd+shift+alt+r"
      }
    ]
  },
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "package": "npm run compile && vsce package --no-dependencies",
    "lint": "tsc --noEmit",
    "test": "TS_NODE_PROJECT=tsconfig.test.json mocha --require ts-node/register 'test/**/*.test.ts'"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "^22.0.0",
    "@types/vscode": "^1.90.0",
    "@vscode/vsce": "^3.0.0",
    "mocha": "^11.7.5",
    "ts-node": "^10.9.2",
    "typescript": "^5.5.0"
  }
}
